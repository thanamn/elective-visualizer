<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Elective Visualizer</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header class="app-header">
    <h1><a href="./" style="color: inherit; text-decoration: none;">Elective Visualizer</a></h1>
    <div class="file-status" id="fileStatus">Loading elective_2025.json…</div>
  </header>

  <section class="toolbar">
    <div class="controls">
      <input id="searchInput" type="search" placeholder="Search… (Press Esc to clear)" aria-label="Search" />
      <button id="clearSearch" class="secondary" title="Clear search">Clear</button>
      <button id="reloadBtn" title="Reload data">Reload</button>
    </div>
    <div id="summary" class="summary"></div>
  </section>

  <section class="filters" aria-label="Course filters">
    <div class="filters-row">
      <label>
        <span>Sort</span>
        <select id="sortSelect">
          <option value="name">Name (A→Z)</option>
          <option value="enrolled">Most enrolled</option>
          <option value="seat">Seats (desc)</option>
          <option value="newest">Newest</option>
          <option value="oldest">Oldest</option>
        </select>
      </label>
      <label>
        <span>Day</span>
        <select id="daySelect">
          <option value="">Any</option>
          <option value="MONDAY">Monday</option>
          <option value="TUESDAY">Tuesday</option>
          <option value="WEDNESDAY">Wednesday</option>
          <option value="THURSDAY">Thursday</option>
          <option value="FRIDAY">Friday</option>
          <option value="SATURDAY">Saturday</option>
          <option value="SUNDAY">Sunday</option>
        </select>
      </label>
      <label>
        <span>Language</span>
        <select id="langSelect">
          <option value="">Any</option>
          <option value="THAI">Thai</option>
          <option value="ENGLISH">English</option>
        </select>
      </label>
      <label>
        <span>Semester</span>
        <select id="halfSelect">
          <option value="">Any</option>
          <option value="FULL_SEMESTER">Full</option>
          <option value="FIRST_HALF">First half</option>
          <option value="SECOND_HALF">Second half</option>
        </select>
      </label>
      <label>
        <span>Year</span>
        <select id="yearSelect">
          <option value="">Any</option>
          <option value="YEAR_TWO">Year 2</option>
          <option value="YEAR_THREE">Year 3</option>
        </select>
      </label>
      <label>
        <span>Category</span>
        <select id="categorySelect">
          <option value="">All</option>
        </select>
      </label>
      <button id="resetFilters" class="secondary">Reset</button>
    </div>
  </section>

  <main id="content" class="content" aria-live="polite"></main>

  <section id="calendarSection" class="calendar-section hidden">
    <div class="calendar-toolbar">
      <h2>Semester Calendar</h2>
      <button id="calendarBackBtn" class="secondary">← Back to list</button>
      <div id="calendarInfo" class="calendar-info"></div>
    </div>
    <div id="calendarGrid" class="calendar-grid"></div>
  </section>

  <footer class="app-footer">
    <span id="dataInfo">Loading data...</span>
  </footer>

  <!-- Modal for course details -->
  <div id="modal" class="modal hidden">
    <div class="modal-backdrop" data-close="true"></div>
    <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <button id="modalClose" class="modal-close" aria-label="Close">✕</button>
      <h2 id="modalTitle"></h2>
      <div id="modalMeta" class="meta"></div>
      <div id="modalSched" class="sched"></div>
      <div id="modalChips" class="chips"></div>
      <div id="modalStats" class="row"></div>
      <div id="modalDesc" class="desc full"></div>
    </div>
  </div>

  <!-- Main module scripts in order of dependencies -->
  <script defer src="./js/state.js"></script>
  <script defer src="./js/utils.js"></script>
  <script defer src="./js/loader.js"></script>
  <script defer src="./js/courses.js"></script>
  <script defer src="./js/table.js"></script>
  <script defer src="./js/tree.js"></script>
  <script defer src="./js/modal.js"></script>
  <script defer src="./js/calendar.js"></script>
  <script defer src="./js/app.js"></script>
</body>
</html>
